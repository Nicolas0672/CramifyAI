const {
    GoogleGenerativeAI,
    HarmCategory,
    HarmBlockThreshold,
  } = require("@google/generative-ai");
  
  const apiKey = process.env.NEXT_PUBLIC_GEMINI_API_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-2.0-flash",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 40,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };
  
  
  export const courseOutline = model.startChat({
    generationConfig,
    history: [
      {
        role: "user",
        parts: [
          {text: "Generate a detailed study material for the course. The topic is \"calc\", the course type is \"study\", the difficulty level is \"easy\", and the course layout is \"anti derivative\". \n\n1. **Introduction**: Provide a brief and clear introduction to the course topic \"${topic}\", explaining what learners can expect and why it’s relevant to their learning goals.\n\n2. **Chapter Breakdown**: Break down the course into chapters based on the provided course layout (\"${courseLayout}\" as a guide. If unclear, you can skip). For each chapter, provide:\n   - **Chapter Title**: A descriptive title for the chapter.\n   - **Chapter Summary**: A brief summary of the chapter, outlining the key concepts and objectives that will be covered.\n   - **Topic List**: A detailed list of topics that will be covered in this chapter, with a brief explanation of each topic.\n   - **Learning Objectives**: Include specific learning objectives for each chapter, so that learners can easily track what they are expected to learn.\n\n3. **Content Quality**: Ensure the content is clear, concise, and aligned with the difficulty level of \"${difficultyLevel}\". Provide relevant examples, and if possible, practical applications that enhance understanding. Make sure the material generated is relevant to the topics within the provided course layout, focusing on user interests and key areas of study.\n\n4. **Output in JSON Format**: Output the entire study material in a well-structured JSON format. Each chapter should be an object with the following keys: \"title\", \"summary\", \"topics\", and \"learningObjectives\". Each topic should have a brief explanation of what it covers.\n\nPlease output in the following JSON structure:\n\n{\n  \"courseTitle\": \"Course Title Here\",\n  \"courseType\": \"${courseType}\",\n  \"difficultyLevel\": \"${difficultyLevel}\",\n  \"courseLayout\": \"${courseLayout}\",\n  \"chapters\": [\n    {\n      \"title\": \"Chapter 1: Introduction to ${topic}\",\n      \"summary\": \"Brief description of what the chapter covers.\",\n      \"topics\": [\n        {\n          \"topicName\": \"Topic 1\",\n          \"description\": \"Detailed description of Topic 1\"\n        },\n        {\n          \"topicName\": \"Topic 2\",\n          \"description\": \"Detailed description of Topic 2\"\n        }\n      ],\n      \"learningObjectives\": [\n        \"Objective 1\",\n        \"Objective 2\"\n      ]\n    }\n  ]\n}"},
        ],
      },
      {
        role: "model",
        parts: [
          {text: "```json\n{\n  \"courseTitle\": \"Introduction to Antiderivatives\",\n  \"courseType\": \"study\",\n  \"difficultyLevel\": \"easy\",\n  \"courseLayout\": \"anti derivative\",\n  \"chapters\": [\n    {\n      \"title\": \"Chapter 1: Understanding the Antiderivative Concept\",\n      \"summary\": \"This chapter introduces the fundamental concept of antiderivatives, also known as indefinite integrals. You will learn what an antiderivative is, its relationship to the derivative, and how to find basic antiderivatives.\",\n      \"topics\": [\n        {\n          \"topicName\": \"What is an Antiderivative?\",\n          \"description\": \"An antiderivative of a function f(x) is a function F(x) whose derivative is f(x), i.e., F'(x) = f(x). We explore the concept with simple examples.\"\n        },\n        {\n          \"topicName\": \"The Indefinite Integral\",\n          \"description\": \"The indefinite integral is the general form of the antiderivative, represented by the symbol ∫. We will see how to represent the antiderivative of f(x) using the indefinite integral ∫f(x) dx.\"\n        },\n        {\n          \"topicName\": \"The Constant of Integration\",\n          \"description\": \"Since the derivative of a constant is zero, the antiderivative of a function is not unique. We always add a constant 'C' to the antiderivative, called the constant of integration, representing all possible antiderivatives.  We explore why this is necessary and how it affects our solutions.\"\n        },\n        {\n          \"topicName\": \"Basic Antiderivative Rules\",\n          \"description\": \"Introduction to simple rules for finding antiderivatives of common functions, like x^n, sin(x), cos(x), and e^x.\"\n        }\n      ],\n      \"learningObjectives\": [\n        \"Define an antiderivative and its relationship to the derivative.\",\n        \"Understand and use the indefinite integral notation.\",\n        \"Explain the importance of the constant of integration.\",\n        \"Apply basic antiderivative rules to find antiderivatives of simple functions.\"\n      ]\n    },\n    {\n      \"title\": \"Chapter 2: Basic Integration Techniques\",\n      \"summary\": \"This chapter builds upon the basics by introducing techniques for finding antiderivatives of more complex functions, including the power rule, constant multiple rule, and sum/difference rule.\",\n      \"topics\": [\n        {\n          \"topicName\": \"The Power Rule for Integration\",\n          \"description\": \"This is one of the most fundamental integration rules. It states that ∫x^n dx = (x^(n+1))/(n+1) + C, provided n ≠ -1. Examples and practice problems will be given.\"\n        },\n        {\n          \"topicName\": \"The Constant Multiple Rule\",\n          \"description\": \"This rule states that ∫k*f(x) dx = k∫f(x) dx, where k is a constant.  We'll learn how to pull constants out of integrals to simplify the process.\"\n        },\n        {\n          \"topicName\": \"The Sum and Difference Rule\",\n          \"description\": \"This rule states that ∫[f(x) ± g(x)] dx = ∫f(x) dx ± ∫g(x) dx. It allows us to break down integrals of sums and differences into simpler integrals.\"\n        },\n        {\n          \"topicName\": \"Antiderivatives of Trigonometric Functions\",\n          \"description\": \"Review of derivatives of sin(x), cos(x), tan(x), etc., and then finding the corresponding antiderivatives: ∫sin(x) dx, ∫cos(x) dx, etc. We will focus on basic trigonometric functions.\"\n        },\n        {\n           \"topicName\": \"Antiderivatives of Exponential Functions\",\n           \"description\": \"The antiderivative of e^x is simply e^x + C.  We also cover cases like ∫a^x dx.\"\n        }\n      ],\n      \"learningObjectives\": [\n        \"Apply the power rule to find antiderivatives of polynomial functions.\",\n        \"Use the constant multiple rule to simplify integration.\",\n        \"Apply the sum and difference rule to integrate more complex functions.\",\n        \"Find antiderivatives of basic trigonometric functions (sin(x) and cos(x)).\",\n        \"Calculate the antiderivatives of exponential functions.\"\n      ]\n    },\n    {\n      \"title\": \"Chapter 3: Applying Antiderivatives - Initial Value Problems\",\n      \"summary\": \"This chapter focuses on using antiderivatives to solve initial value problems. These problems provide additional information that allows us to determine the specific constant of integration and find a unique solution.\",\n      \"topics\": [\n        {\n          \"topicName\": \"What is an Initial Value Problem?\",\n          \"description\": \"An initial value problem involves finding a function given its derivative and a specific value of the function at a particular point (e.g., f'(x) and f(0) = 5).\"\n        },\n        {\n          \"topicName\": \"Solving Initial Value Problems\",\n          \"description\": \"We will learn the steps to solve initial value problems: find the general antiderivative, use the initial condition to solve for the constant of integration, and write the specific solution.\"\n        },\n        {\n          \"topicName\": \"Applications of Initial Value Problems\",\n          \"description\": \"Examples of real-world applications where initial value problems are used, such as finding the position of an object given its velocity and initial position.\"\n        }\n      ],\n      \"learningObjectives\": [\n        \"Define an initial value problem.\",\n        \"Solve initial value problems by finding the general antiderivative and using the initial condition.\",\n        \"Apply antiderivatives to solve real-world problems involving initial values.\"\n      ]\n    },\n    {\n     \"title\": \"Chapter 4: Practice Problems and Review\",\n     \"summary\": \"This chapter is dedicated to practice problems that reinforce all of the concepts learned in the previous chapters. It will include a review of key rules and techniques.\",\n     \"topics\": [\n       {\n         \"topicName\": \"Practice Problems: Basic Antiderivatives\",\n         \"description\": \"A set of problems focusing on applying basic antiderivative rules, the power rule, and the constant multiple rule.\"\n       },\n       {\n         \"topicName\": \"Practice Problems: Trigonometric and Exponential Antiderivatives\",\n         \"description\": \"Problems involving finding antiderivatives of trigonometric and exponential functions.\"\n       },\n       {\n         \"topicName\": \"Practice Problems: Initial Value Problems\",\n         \"description\": \"A collection of initial value problems to solve, incorporating the concepts of antiderivatives and initial conditions.\"\n       },\n       {\n         \"topicName\": \"Review of Key Concepts\",\n         \"description\": \"A summary of the main rules and techniques covered in the course, serving as a refresher for the final assessment.\"\n       }\n     ],\n     \"learningObjectives\":[\n       \"Reinforce understanding of antiderivative rules through practice.\",\n       \"Improve problem-solving skills in applying antiderivatives.\",\n       \"Consolidate knowledge and prepare for assessments.\"\n     ]\n    }\n  ]\n}\n```"},
        ],
      },
    ],
})
  
    // const result = await chatSession.sendMessage("INSERT_INPUT_HERE");
    // console.log(result.response.text());
  
  
